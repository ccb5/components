{"name": "littlefs", "author": "joltwallet", "version": "1.14.1", "all_version": ["1.14.0", "1.13.1", "1.13.0", "1.12.1", "1.12.0", "1.11.0", "1.10.2", "1.10.1", "1.10.0", "1.9.2", "1.9.1", "1.9.0", "1.8.0", "1.7.0", "1.6.0", "1.5.5", "1.5.4", "1.5.3", "1.5.2", "1.5.1", "1.5.0", "1.4.1", "1.4.0", "1.3.2", "1.3.1", "1.1.0", "1.0.1", "1.0.0"], "license": "MIT", "keywords": [], "description": "LittleFS is a small fail-safe filesystem for micro-controllers.", "readme": "<p>LittleFS for ESP-IDF.</p>\n<h1 id=\"what-is-littlefs\">What is LittleFS?</h1>\n<p><a href=\"https://github.com/ARMmbed/littlefs\">LittleFS</a> is a small fail-safe filesystem \nfor microcontrollers. We ported LittleFS to esp-idf (specifically, the ESP32) \nbecause SPIFFS was too slow, and FAT was too fragile.</p>\n<h1 id=\"how-to-use\">How to Use</h1>\n<h2 id=\"esp-idf\">ESP-IDF</h2>\n<p>There are two ways to add this component to your project</p>\n<ol>\n<li>As a ESP-IDF managed component: In your project directory run</li>\n</ol>\n<pre style=\"padding: 0px;\"><div class=\"flex justify-between items-center\" style=\"background-color: rgb(55, 67, 88); padding: 0rem 1rem;\"><p class=\"text-sm font-medium text-white-700\" style=\"margin:10px\">Plaintext</p><button class=\"float-right text-white rounded cursor-pointer tooltip-button\"><img src=\"/static/icons/utils/copy-b9de36a5f9c92ed5c80eb0284941cef5.svg\" alt=\"Copy To Clipboard\" width=\"16px\" height=\"16px\" style=\"filter: invert(1); margin: 0;\"></button><div role=\"tooltip\" class=\"py-2 px-3 z-10 float-right shadow-sm opacity-0 transition-opacity duration-300 text-sm font-medium text-white bg-gray-90 rounded cursor-pointer invisible tooltip rounded-lg\" data-popper-reference-hidden=\"\" data-popper-placement=\"top\" style=\"background-color: black; position: absolute; inset: auto auto 0px 0px; margin: 0px; transform: translate3d(828px, 0px, 0px);\"><p style=\"margin: 0;\">Copy to Clipboard</p><div class=\"tooltip-arrow\" data-popper-arrow=\"\" style=\"position: absolute; left: 0px; transform: translate3d(73.6px, 0px, 0px);\"></div></div></div><code id=\"codeblock-0\">idf.py add-dependency joltwallet/littlefs==1.14.1\n</code></pre><ol>\n<li>As a submodule: In your project, add this as a submodule to your <code>components/</code> directory.</li>\n</ol>\n<pre style=\"padding: 0px;\"><div class=\"flex justify-between items-center\" style=\"background-color: rgb(55, 67, 88); padding: 0rem 1rem;\"><p class=\"text-sm font-medium text-white-700\" style=\"margin:10px\">Plaintext</p><button class=\"float-right text-white rounded cursor-pointer tooltip-button\"><img src=\"/static/icons/utils/copy-b9de36a5f9c92ed5c80eb0284941cef5.svg\" alt=\"Copy To Clipboard\" width=\"16px\" height=\"16px\" style=\"filter: invert(1); margin: 0;\"></button><div role=\"tooltip\" class=\"py-2 px-3 z-10 float-right shadow-sm opacity-0 transition-opacity duration-300 text-sm font-medium text-white bg-gray-90 rounded cursor-pointer invisible tooltip rounded-lg\" data-popper-reference-hidden=\"\" data-popper-escaped=\"\" data-popper-placement=\"top\" style=\"background-color: black; position: absolute; inset: auto auto 0px 0px; margin: 0px; transform: translate3d(828px, 140px, 0px);\"><p style=\"margin: 0;\">Copy to Clipboard</p><div class=\"tooltip-arrow\" data-popper-arrow=\"\" style=\"position: absolute; left: 0px; transform: translate3d(73.6px, 0px, 0px);\"></div></div></div><code id=\"codeblock-1\">git submodule add https://github.com/joltwallet/esp_littlefs.git\ngit submodule update --init --recursive\n</code></pre><p>The library can be configured via <code>idf.py menuconfig</code> under <code>Component config-&gt;LittleFS</code>.</p>\n<h4 id=\"example\">Example</h4>\n<p>User @wreyford has kindly provided a <a href=\"https://github.com/wreyford/demo_esp_littlefs\">demo repo</a> showing the use of <code>esp_littlefs</code>. A modified copy exists in the <code>example/</code> directory.</p>\n<h2 id=\"platformio\">PlatformIO</h2>\n<p>Add to the following line to your project's <code>platformio.ini</code> file:</p>\n<pre style=\"padding: 0px;\"><div class=\"flex justify-between items-center\" style=\"background-color: rgb(55, 67, 88); padding: 0rem 1rem;\"><p class=\"text-sm font-medium text-white-700\" style=\"margin:10px\">Plaintext</p><button class=\"float-right text-white rounded cursor-pointer tooltip-button\"><img src=\"/static/icons/utils/copy-b9de36a5f9c92ed5c80eb0284941cef5.svg\" alt=\"Copy To Clipboard\" width=\"16px\" height=\"16px\" style=\"filter: invert(1); margin: 0;\"></button><div role=\"tooltip\" class=\"py-2 px-3 z-10 float-right shadow-sm opacity-0 transition-opacity duration-300 text-sm font-medium text-white bg-gray-90 rounded cursor-pointer invisible tooltip rounded-lg\" data-popper-reference-hidden=\"\" data-popper-escaped=\"\" data-popper-placement=\"top\" style=\"background-color: black; position: absolute; inset: auto auto 0px 0px; margin: 0px; transform: translate3d(828px, 548px, 0px);\"><p style=\"margin: 0;\">Copy to Clipboard</p><div class=\"tooltip-arrow\" data-popper-arrow=\"\" style=\"position: absolute; left: 0px; transform: translate3d(73.6px, 0px, 0px);\"></div></div></div><code id=\"codeblock-2\">lib_deps = https://github.com/joltwallet/esp_littlefs.git\n</code></pre><p>Example <code>platformio.ini</code> file:</p>\n<pre style=\"padding: 0px;\"><div class=\"flex justify-between items-center\" style=\"background-color: rgb(55, 67, 88); padding: 0rem 1rem;\"><p class=\"text-sm font-medium text-white-700\" style=\"margin:10px\">Plaintext</p><button class=\"float-right text-white rounded cursor-pointer tooltip-button\"><img src=\"/static/icons/utils/copy-b9de36a5f9c92ed5c80eb0284941cef5.svg\" alt=\"Copy To Clipboard\" width=\"16px\" height=\"16px\" style=\"filter: invert(1); margin: 0;\"></button><div role=\"tooltip\" class=\"py-2 px-3 z-10 float-right shadow-sm opacity-0 transition-opacity duration-300 text-sm font-medium text-white bg-gray-90 rounded cursor-pointer invisible tooltip rounded-lg\" data-popper-reference-hidden=\"\" data-popper-escaped=\"\" data-popper-placement=\"top\" style=\"background-color: black; position: absolute; inset: auto auto 0px 0px; margin: 0px; transform: translate3d(828px, 688px, 0px);\"><p style=\"margin: 0;\">Copy to Clipboard</p><div class=\"tooltip-arrow\" data-popper-arrow=\"\" style=\"position: absolute; left: 0px; transform: translate3d(73.6px, 0px, 0px);\"></div></div></div><code id=\"codeblock-3\">[env]\nplatform = espressif32\nframework = espidf\nmonitor_speed = 115200\n\n[common]\nlib_deps = https://github.com/joltwallet/esp_littlefs.git\n\n[env:nodemcu-32s]\nboard = nodemcu-32s\nboard_build.filesystem = littlefs\nboard_build.partitions = min_littlefs.csv\nlib_deps = ${common.lib_deps}\n</code></pre><p>Example <code>min_littlefs.cvs</code> flash partition layout:</p>\n<pre style=\"padding: 0px;\"><div class=\"flex justify-between items-center\" style=\"background-color: rgb(55, 67, 88); padding: 0rem 1rem;\"><p class=\"text-sm font-medium text-white-700\" style=\"margin:10px\">Plaintext</p><button class=\"float-right text-white rounded cursor-pointer tooltip-button\"><img src=\"/static/icons/utils/copy-b9de36a5f9c92ed5c80eb0284941cef5.svg\" alt=\"Copy To Clipboard\" width=\"16px\" height=\"16px\" style=\"filter: invert(1); margin: 0;\"></button><div role=\"tooltip\" class=\"py-2 px-3 z-10 float-right shadow-sm opacity-0 transition-opacity duration-300 text-sm font-medium text-white bg-gray-90 rounded cursor-pointer invisible tooltip rounded-lg\" data-popper-reference-hidden=\"\" data-popper-escaped=\"\" data-popper-placement=\"top\" style=\"background-color: black; position: absolute; inset: auto auto 0px 0px; margin: 0px; transform: translate3d(828px, 1116px, 0px);\"><p style=\"margin: 0;\">Copy to Clipboard</p><div class=\"tooltip-arrow\" data-popper-arrow=\"\" style=\"position: absolute; left: 0px; transform: translate3d(73.6px, 0px, 0px);\"></div></div></div><code id=\"codeblock-4\"># Name,   Type, SubType,  Offset,  Size, Flags\nnvs,      data, nvs,      0x9000,  0x5000,\notadata,  data, ota,      0xe000,  0x2000,\napp0,     app,  ota_0,    0x10000, 0x1E0000,\napp1,     app,  ota_1,    0x1F0000,0x1E0000,\nlittlefs, data, spiffs,   0x3D0000,0x20000,\ncoredump, data, coredump, 0x3F0000,0x10000,\n</code></pre><p><a href=\"https://github.com/platformio/platform-espressif32/issues/479\">Currently, it is required</a> to modify <code>CMakeList.txt</code>. Add the following 2 lines to the your project's <code>CMakeList.txt</code>:</p>\n<pre style=\"padding: 0px;\"><div class=\"flex justify-between items-center\" style=\"background-color: rgb(55, 67, 88); padding: 0rem 1rem;\"><p class=\"text-sm font-medium text-white-700\" style=\"margin:10px\">Plaintext</p><button class=\"float-right text-white rounded cursor-pointer tooltip-button\"><img src=\"/static/icons/utils/copy-b9de36a5f9c92ed5c80eb0284941cef5.svg\" alt=\"Copy To Clipboard\" width=\"16px\" height=\"16px\" style=\"filter: invert(1); margin: 0;\"></button><div role=\"tooltip\" class=\"py-2 px-3 z-10 float-right shadow-sm opacity-0 transition-opacity duration-300 text-sm font-medium text-white bg-gray-90 rounded cursor-pointer invisible tooltip rounded-lg\" data-popper-reference-hidden=\"\" data-popper-escaped=\"\" data-popper-placement=\"top\" style=\"background-color: black; position: absolute; inset: auto auto 0px 0px; margin: 0px; transform: translate3d(828px, 1428px, 0px);\"><p style=\"margin: 0;\">Copy to Clipboard</p><div class=\"tooltip-arrow\" data-popper-arrow=\"\" style=\"position: absolute; left: 0px; transform: translate3d(73.6px, 0px, 0px);\"></div></div></div><code id=\"codeblock-5\">get_filename_component(configName \"${CMAKE_BINARY_DIR}\" NAME)\nlist(APPEND EXTRA_COMPONENT_DIRS \"${CMAKE_SOURCE_DIR}/.pio/libdeps/${configName}/esp_littlefs\")\n</code></pre><p>Example <code>CMakeList.txt</code>:</p>\n<pre style=\"padding: 0px;\"><div class=\"flex justify-between items-center\" style=\"background-color: rgb(55, 67, 88); padding: 0rem 1rem;\"><p class=\"text-sm font-medium text-white-700\" style=\"margin:10px\">Plaintext</p><button class=\"float-right text-white rounded cursor-pointer tooltip-button\"><img src=\"/static/icons/utils/copy-b9de36a5f9c92ed5c80eb0284941cef5.svg\" alt=\"Copy To Clipboard\" width=\"16px\" height=\"16px\" style=\"filter: invert(1); margin: 0;\"></button><div role=\"tooltip\" class=\"py-2 px-3 z-10 float-right shadow-sm opacity-0 transition-opacity duration-300 text-sm font-medium text-white bg-gray-90 rounded cursor-pointer invisible tooltip rounded-lg\" data-popper-reference-hidden=\"\" data-popper-escaped=\"\" data-popper-placement=\"top\" style=\"background-color: black; position: absolute; inset: auto auto 0px 0px; margin: 0px; transform: translate3d(828px, 1592px, 0px);\"><p style=\"margin: 0;\">Copy to Clipboard</p><div class=\"tooltip-arrow\" data-popper-arrow=\"\" style=\"position: absolute; left: 0px; transform: translate3d(73.6px, 0px, 0px);\"></div></div></div><code id=\"codeblock-6\">cmake_minimum_required(VERSION 3.16.0)\ninclude($ENV{IDF_PATH}/tools/cmake/project.cmake)\n\nget_filename_component(configName \"${CMAKE_BINARY_DIR}\" NAME)\nlist(APPEND EXTRA_COMPONENT_DIRS \"${CMAKE_SOURCE_DIR}/.pio/libdeps/${configName}/esp_littlefs\")\n\nproject(my_project_name_here)\n</code></pre><p>To configure LittleFS from PlatformIO, run the following command:</p>\n<pre style=\"padding: 0px;\"><div class=\"flex justify-between items-center\" style=\"background-color: rgb(55, 67, 88); padding: 0rem 1rem;\"><p class=\"text-sm font-medium text-white-700\" style=\"margin:10px\">Console</p><button class=\"float-right text-white rounded cursor-pointer tooltip-button\"><img src=\"/static/icons/utils/copy-b9de36a5f9c92ed5c80eb0284941cef5.svg\" alt=\"Copy To Clipboard\" width=\"16px\" height=\"16px\" style=\"filter: invert(1); margin: 0;\"></button><div role=\"tooltip\" class=\"py-2 px-3 z-10 float-right shadow-sm opacity-0 transition-opacity duration-300 text-sm font-medium text-white bg-gray-90 rounded cursor-pointer invisible tooltip rounded-lg\" data-popper-reference-hidden=\"\" data-popper-escaped=\"\" data-popper-placement=\"top\" style=\"background-color: black; position: absolute; inset: auto auto 0px 0px; margin: 0px; transform: translate3d(828px, 1876px, 0px);\"><p style=\"margin: 0;\">Copy to Clipboard</p><div class=\"tooltip-arrow\" data-popper-arrow=\"\" style=\"position: absolute; left: 0px; transform: translate3d(73.6px, 0px, 0px);\"></div></div></div><code class=\"hljs language-console\" id=\"codeblock-7\"><span class=\"hljs-meta\">$ </span><span>pio run -t menuconfig</span>\n</code></pre><p>An entry <code>Component config-&gt;LittleFS</code> should be available for configuration. If not, check your <code>CMakeList.txt</code> configuration.</p>\n<h1 id=\"documentation\">Documentation</h1>\n<p>See the official <a href=\"https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/storage/spiffs.html\">ESP-IDF SPIFFS documentation</a>, basically all the functionality is the \nsame; just replace <code>spiffs</code> with <code>littlefs</code> in all function calls.</p>\n<p>Also see the comments in <code>include/esp_littlefs.h</code></p>\n<p>Slight differences between this configuration and SPIFFS's configuration is in the <code>esp_vfs_littlefs_conf_t</code>:</p>\n<ol>\n<li><code>max_files</code> field doesn't exist since we removed the file limit, thanks to @X-Ryl669</li>\n<li><code>partition_label</code> is not allowed to be <code>NULL</code>. You must specify the partition name from your partition table. This is because there isn't a define <code>littlefs</code> partition subtype in <code>esp-idf</code>. The subtype doesn't matter.<ul>\n<li>Alternatively, you can specify an <code>esp_partition_t*</code> to a <code>partition</code> and set <code>partition_label=NULL</code>.</li>\n</ul>\n</li>\n<li><code>grow_on_mount</code> will expand an existing filesystem to fill the partition. Defaults to <code>false</code>.<ul>\n<li>LittleFS filesystems can only grow, they cannot shrink.</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"filesystem-image-creation\">Filesystem Image Creation</h3>\n<p>At compile time, a filesystem image can be created and flashed to the device by adding the following to your project's <code>CMakeLists.txt</code> file:</p>\n<pre style=\"padding: 0px;\"><div class=\"flex justify-between items-center\" style=\"background-color: rgb(55, 67, 88); padding: 0rem 1rem;\"><p class=\"text-sm font-medium text-white-700\" style=\"margin:10px\">Plaintext</p><button class=\"float-right text-white rounded cursor-pointer tooltip-button\"><img src=\"/static/icons/utils/copy-b9de36a5f9c92ed5c80eb0284941cef5.svg\" alt=\"Copy To Clipboard\" width=\"16px\" height=\"16px\" style=\"filter: invert(1); margin: 0;\"></button><div role=\"tooltip\" class=\"py-2 px-3 z-10 float-right shadow-sm opacity-0 transition-opacity duration-300 text-sm font-medium text-white bg-gray-90 rounded cursor-pointer invisible tooltip rounded-lg\" data-popper-reference-hidden=\"\" data-popper-escaped=\"\" data-popper-placement=\"top\" style=\"background-color: black; position: absolute; inset: auto auto 0px 0px; margin: 0px; transform: translate3d(828px, 2764px, 0px);\"><p style=\"margin: 0;\">Copy to Clipboard</p><div class=\"tooltip-arrow\" data-popper-arrow=\"\" style=\"position: absolute; left: 0px; transform: translate3d(73.6px, 0px, 0px);\"></div></div></div><code id=\"codeblock-8\">littlefs_create_partition_image(partition_name path_to_folder_containing_files)\n</code></pre><p>For example, if your partition table looks like:</p>\n<pre style=\"padding: 0px;\"><div class=\"flex justify-between items-center\" style=\"background-color: rgb(55, 67, 88); padding: 0rem 1rem;\"><p class=\"text-sm font-medium text-white-700\" style=\"margin:10px\">Plaintext</p><button class=\"float-right text-white rounded cursor-pointer tooltip-button\"><img src=\"/static/icons/utils/copy-b9de36a5f9c92ed5c80eb0284941cef5.svg\" alt=\"Copy To Clipboard\" width=\"16px\" height=\"16px\" style=\"filter: invert(1); margin: 0;\"></button><div role=\"tooltip\" class=\"py-2 px-3 z-10 float-right shadow-sm opacity-0 transition-opacity duration-300 text-sm font-medium text-white bg-gray-90 rounded cursor-pointer invisible tooltip rounded-lg\" data-popper-reference-hidden=\"\" data-popper-escaped=\"\" data-popper-placement=\"top\" style=\"background-color: black; position: absolute; inset: auto auto 0px 0px; margin: 0px; transform: translate3d(828px, 2904px, 0px);\"><p style=\"margin: 0;\">Copy to Clipboard</p><div class=\"tooltip-arrow\" data-popper-arrow=\"\" style=\"position: absolute; left: 0px; transform: translate3d(73.6px, 0px, 0px);\"></div></div></div><code id=\"codeblock-9\"># Name,   Type, SubType,  Offset,  Size, Flags\nnvs,      data, nvs,      0x9000,  0x6000,\nphy_init, data, phy,      0xf000,  0x1000,\nfactory,  app,  factory,  0x10000, 1M,\ngraphics,  data, spiffs,         ,  0xF0000, \n</code></pre><p>and your project has a folder called <code>device_graphics</code>, your call should be:</p>\n<pre style=\"padding: 0px;\"><div class=\"flex justify-between items-center\" style=\"background-color: rgb(55, 67, 88); padding: 0rem 1rem;\"><p class=\"text-sm font-medium text-white-700\" style=\"margin:10px\">Plaintext</p><button class=\"float-right text-white rounded cursor-pointer tooltip-button\"><img src=\"/static/icons/utils/copy-b9de36a5f9c92ed5c80eb0284941cef5.svg\" alt=\"Copy To Clipboard\" width=\"16px\" height=\"16px\" style=\"filter: invert(1); margin: 0;\"></button><div role=\"tooltip\" class=\"py-2 px-3 z-10 float-right shadow-sm opacity-0 transition-opacity duration-300 text-sm font-medium text-white bg-gray-90 rounded cursor-pointer invisible tooltip rounded-lg\" data-popper-reference-hidden=\"\" data-popper-escaped=\"\" data-popper-placement=\"top\" style=\"background-color: black; position: absolute; inset: auto auto 0px 0px; margin: 0px; transform: translate3d(828px, 3140px, 0px);\"><p style=\"margin: 0;\">Copy to Clipboard</p><div class=\"tooltip-arrow\" data-popper-arrow=\"\" style=\"position: absolute; left: 0px; transform: translate3d(73.6px, 0px, 0px);\"></div></div></div><code id=\"codeblock-10\">littlefs_create_partition_image(graphics device_graphics)\n</code></pre><h1 id=\"performance\">Performance</h1>\n<p>Here are some naive benchmarks to give a vague indicator on performance.\nTests were performed with the following configuration:</p>\n<ul>\n<li>ESP-IDF: v4.4</li>\n<li>Target: ESP32</li>\n<li>CPU Clock: 160MHz</li>\n<li>Flash SPI Freq: 80MHz</li>\n<li>Flash SPI Mode: QIO</li>\n</ul>\n<p>In these tests, FAT has a cache size of 4096, and SPIFFS has a cahce size of 256 bytes.</p>\n<h4 id=\"formatting-a-512kb-partition\">Formatting a 512KB partition</h4>\n<pre style=\"padding: 0px;\"><div class=\"flex justify-between items-center\" style=\"background-color: rgb(55, 67, 88); padding: 0rem 1rem;\"><p class=\"text-sm font-medium text-white-700\" style=\"margin:10px\">Plaintext</p><button class=\"float-right text-white rounded cursor-pointer tooltip-button\"><img src=\"/static/icons/utils/copy-b9de36a5f9c92ed5c80eb0284941cef5.svg\" alt=\"Copy To Clipboard\" width=\"16px\" height=\"16px\" style=\"filter: invert(1); margin: 0;\"></button><div role=\"tooltip\" class=\"py-2 px-3 z-10 float-right shadow-sm opacity-0 transition-opacity duration-300 text-sm font-medium text-white bg-gray-90 rounded cursor-pointer invisible tooltip rounded-lg\" data-popper-reference-hidden=\"\" data-popper-escaped=\"\" data-popper-placement=\"top\" style=\"background-color: black; position: absolute; inset: auto auto 0px 0px; margin: 0px; transform: translate3d(828px, 3652px, 0px);\"><p style=\"margin: 0;\">Copy to Clipboard</p><div class=\"tooltip-arrow\" data-popper-arrow=\"\" style=\"position: absolute; left: 0px; transform: translate3d(73.6px, 0px, 0px);\"></div></div></div><code id=\"codeblock-11\">FAT:         549,494 us\nSPIFFS:   10,715,425 us\nLittleFS:    110,997 us\n</code></pre><h4 id=\"writing-5-88kb-files\">Writing 5 88KB files</h4>\n<pre style=\"padding: 0px;\"><div class=\"flex justify-between items-center\" style=\"background-color: rgb(55, 67, 88); padding: 0rem 1rem;\"><p class=\"text-sm font-medium text-white-700\" style=\"margin:10px\">Plaintext</p><button class=\"float-right text-white rounded cursor-pointer tooltip-button\"><img src=\"/static/icons/utils/copy-b9de36a5f9c92ed5c80eb0284941cef5.svg\" alt=\"Copy To Clipboard\" width=\"16px\" height=\"16px\" style=\"filter: invert(1); margin: 0;\"></button><div role=\"tooltip\" class=\"py-2 px-3 z-10 float-right shadow-sm opacity-0 transition-opacity duration-300 text-sm font-medium text-white bg-gray-90 rounded cursor-pointer invisible tooltip rounded-lg\" data-popper-reference-hidden=\"\" data-popper-escaped=\"\" data-popper-placement=\"top\" style=\"background-color: black; position: absolute; inset: auto auto 0px 0px; margin: 0px; transform: translate3d(828px, 3820px, 0px);\"><p style=\"margin: 0;\">Copy to Clipboard</p><div class=\"tooltip-arrow\" data-popper-arrow=\"\" style=\"position: absolute; left: 0px; transform: translate3d(73.6px, 0px, 0px);\"></div></div></div><code id=\"codeblock-12\">FAT:                            7,124,812 us\nSPIFFS*:                       99,138,905 us\nLittleFS (cache=128):           8,261,920 us\nLittleFS (cache=512 default):   6,356,247 us\nLittleFS (cache=4096):          6,026,592 us\n*Only wrote 374,784 bytes instead of the benchmark 440,000, so this value is extrapolated\n</code></pre><p>In the above test, SPIFFS drastically slows down as the filesystem fills up. Below\nis the specific breakdown of file write times for SPIFFS. Not sure what happens \non the last file write.</p>\n<pre style=\"padding: 0px;\"><div class=\"flex justify-between items-center\" style=\"background-color: rgb(55, 67, 88); padding: 0rem 1rem;\"><p class=\"text-sm font-medium text-white-700\" style=\"margin:10px\">Plaintext</p><button class=\"float-right text-white rounded cursor-pointer tooltip-button\"><img src=\"/static/icons/utils/copy-b9de36a5f9c92ed5c80eb0284941cef5.svg\" alt=\"Copy To Clipboard\" width=\"16px\" height=\"16px\" style=\"filter: invert(1); margin: 0;\"></button><div role=\"tooltip\" class=\"py-2 px-3 z-10 float-right shadow-sm opacity-0 transition-opacity duration-300 text-sm font-medium text-white bg-gray-90 rounded cursor-pointer invisible tooltip rounded-lg\" data-popper-reference-hidden=\"\" data-popper-escaped=\"\" data-popper-placement=\"top\" style=\"background-color: black; position: absolute; inset: auto auto 0px 0px; margin: 0px; transform: translate3d(828px, 4108px, 0px);\"><p style=\"margin: 0;\">Copy to Clipboard</p><div class=\"tooltip-arrow\" data-popper-arrow=\"\" style=\"position: absolute; left: 0px; transform: translate3d(73.6px, 0px, 0px);\"></div></div></div><code id=\"codeblock-13\">SPIFFS:\n\n88000 bytes written in 2190635 us\n88000 bytes written in 2190321 us\n88000 bytes written in 5133605 us\n88000 bytes written in 16570667 us\n22784 bytes written in 73053677 us\n</code></pre><h4 id=\"reading-5-88kb-files\">Reading 5 88KB files</h4>\n<pre style=\"padding: 0px;\"><div class=\"flex justify-between items-center\" style=\"background-color: rgb(55, 67, 88); padding: 0rem 1rem;\"><p class=\"text-sm font-medium text-white-700\" style=\"margin:10px\">Plaintext</p><button class=\"float-right text-white rounded cursor-pointer tooltip-button\"><img src=\"/static/icons/utils/copy-b9de36a5f9c92ed5c80eb0284941cef5.svg\" alt=\"Copy To Clipboard\" width=\"16px\" height=\"16px\" style=\"filter: invert(1); margin: 0;\"></button><div role=\"tooltip\" class=\"py-2 px-3 z-10 float-right shadow-sm opacity-0 transition-opacity duration-300 text-sm font-medium text-white bg-gray-90 rounded cursor-pointer invisible tooltip rounded-lg\" data-popper-reference-hidden=\"\" data-popper-escaped=\"\" data-popper-placement=\"top\" style=\"background-color: black; position: absolute; inset: auto auto 0px 0px; margin: 0px; transform: translate3d(828px, 4372px, 0px);\"><p style=\"margin: 0;\">Copy to Clipboard</p><div class=\"tooltip-arrow\" data-popper-arrow=\"\" style=\"position: absolute; left: 0px; transform: translate3d(73.6px, 0px, 0px);\"></div></div></div><code id=\"codeblock-14\">FAT:                            5,685,230 us\nSPIFFS*:                        5,162,289 us\nLittleFS (cache=128):           6,284,142 us\nLittleFS (cache=512 default):   5,874,931 us\nLittleFS (cache=4096):          5,731,385 us\n*Only read 374,784 bytes instead of the benchmark 440,000, so this value is extrapolated\n</code></pre><h4 id=\"deleting-5-88kb-files\">Deleting 5 88KB files</h4>\n<pre style=\"padding: 0px;\"><div class=\"flex justify-between items-center\" style=\"background-color: rgb(55, 67, 88); padding: 0rem 1rem;\"><p class=\"text-sm font-medium text-white-700\" style=\"margin:10px\">Plaintext</p><button class=\"float-right text-white rounded cursor-pointer tooltip-button\"><img src=\"/static/icons/utils/copy-b9de36a5f9c92ed5c80eb0284941cef5.svg\" alt=\"Copy To Clipboard\" width=\"16px\" height=\"16px\" style=\"filter: invert(1); margin: 0;\"></button><div role=\"tooltip\" class=\"py-2 px-3 z-10 float-right shadow-sm opacity-0 transition-opacity duration-300 text-sm font-medium text-white bg-gray-90 rounded cursor-pointer invisible tooltip rounded-lg\" data-popper-reference-hidden=\"\" data-popper-escaped=\"\" data-popper-placement=\"top\" style=\"background-color: black; position: absolute; inset: auto auto 0px 0px; margin: 0px; transform: translate3d(828px, 4612px, 0px);\"><p style=\"margin: 0;\">Copy to Clipboard</p><div class=\"tooltip-arrow\" data-popper-arrow=\"\" style=\"position: absolute; left: 0px; transform: translate3d(73.6px, 0px, 0px);\"></div></div></div><code id=\"codeblock-15\">FAT:                              680,358 us\nSPIFFS*:                        1,653,500 us\nLittleFS (cache=128):              86,090 us\nLittleFS (cache=512 default):      53,705 us\nLittleFS (cache=4096):             27,709 us\n*The 5th file was smaller, did not extrapolate value.\n</code></pre><h1 id=\"tips-tricks-and-gotchas\">Tips, Tricks, and Gotchas</h1>\n<ul>\n<li><p>LittleFS operates on blocks, and blocks have a size of 4096 bytes on the ESP32.</p>\n</li>\n<li><p>A freshly formatted LittleFS will have 2 blocks in use, making it seem like 8KB are in use.</p>\n</li>\n<li><p>The esp32 has <a href=\"https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/spi_flash/spi_flash_concurrency.html#concurrency-constraints-for-flash-on-spi1\">flash concurrency constraints</a>.\nWhen using UART (either for data transfer or generic logging) at the same time, you <em>MUST</em> enable the following option in KConfig:\n<code>menuconfig &gt; Component config &gt; Driver config &gt; UART &gt; UART ISR in IRAM</code>.</p>\n</li>\n</ul>\n<h1 id=\"running-unit-tests\">Running Unit Tests</h1>\n<p>To flash the unit-tester app and the unit-tests, clone or symbolicly link this\ncomponent to <code>$IDF_PATH/tools/unit-test-app/components/littlefs</code>. Make sure the\nfolder name is <code>littlefs</code>, not <code>esp_littlefs</code>. Then, run the following:</p>\n<pre style=\"padding: 0px;\"><div class=\"flex justify-between items-center\" style=\"background-color: rgb(55, 67, 88); padding: 0rem 1rem;\"><p class=\"text-sm font-medium text-white-700\" style=\"margin:10px\">Plaintext</p><button class=\"float-right text-white rounded cursor-pointer tooltip-button\"><img src=\"/static/icons/utils/copy-b9de36a5f9c92ed5c80eb0284941cef5.svg\" alt=\"Copy To Clipboard\" width=\"16px\" height=\"16px\" style=\"filter: invert(1); margin: 0;\"></button><div role=\"tooltip\" class=\"py-2 px-3 z-10 float-right shadow-sm opacity-0 transition-opacity duration-300 text-sm font-medium text-white bg-gray-90 rounded cursor-pointer invisible tooltip rounded-lg\" data-popper-reference-hidden=\"\" data-popper-escaped=\"\" data-popper-placement=\"top\" style=\"background-color: black; position: absolute; inset: auto auto 0px 0px; margin: 0px; transform: translate3d(828px, 5272px, 0px);\"><p style=\"margin: 0;\">Copy to Clipboard</p><div class=\"tooltip-arrow\" data-popper-arrow=\"\" style=\"position: absolute; left: 0px; transform: translate3d(73.6px, 0px, 0px);\"></div></div></div><code id=\"codeblock-16\">cd $IDF_PATH/tools/unit-test-app\nidf.py menuconfig  # See notes\nidf.py -T littlefs -p YOUR_PORT_HERE flash monitor\n</code></pre><p>In <code>menuconfig</code>:</p>\n<ul>\n<li><p>Set the partition table to <code>components/littlefs/partition_table_unit_test_app.csv</code></p>\n</li>\n<li><p>Double check your crystal frequency <code>ESP32_XTAL_FREQ_SEL</code>; my board doesn't work with autodetect.</p>\n</li>\n</ul>\n<p>To test on an encrypted partition, add the <code>encrypted</code> flag to the <code>flash_test</code> partition\nin <code>partition_table_unit_test_app.csv</code>. I.e.</p>\n<pre style=\"padding: 0px;\"><div class=\"flex justify-between items-center\" style=\"background-color: rgb(55, 67, 88); padding: 0rem 1rem;\"><p class=\"text-sm font-medium text-white-700\" style=\"margin:10px\">Plaintext</p><button class=\"float-right text-white rounded cursor-pointer tooltip-button\"><img src=\"/static/icons/utils/copy-b9de36a5f9c92ed5c80eb0284941cef5.svg\" alt=\"Copy To Clipboard\" width=\"16px\" height=\"16px\" style=\"filter: invert(1); margin: 0;\"></button><div role=\"tooltip\" class=\"py-2 px-3 z-10 float-right shadow-sm opacity-0 transition-opacity duration-300 text-sm font-medium text-white bg-gray-90 rounded cursor-pointer invisible tooltip rounded-lg\" data-popper-reference-hidden=\"\" data-popper-escaped=\"\" data-popper-placement=\"top\" style=\"background-color: black; position: absolute; inset: auto auto 0px 0px; margin: 0px; transform: translate3d(828px, 5660px, 0px);\"><p style=\"margin: 0;\">Copy to Clipboard</p><div class=\"tooltip-arrow\" data-popper-arrow=\"\" style=\"position: absolute; left: 0px; transform: translate3d(73.6px, 0px, 0px);\"></div></div></div><code id=\"codeblock-17\">flash_test,  data, spiffs,    ,        512K, encrypted\n</code></pre><p>Also make sure that <code>CONFIG_SECURE_FLASH_ENC_ENABLED=y</code> in <code>menuconfig</code>.</p>\n<p>The unit tester can then be flashed via the command:</p>\n<pre style=\"padding: 0px;\"><div class=\"flex justify-between items-center\" style=\"background-color: rgb(55, 67, 88); padding: 0rem 1rem;\"><p class=\"text-sm font-medium text-white-700\" style=\"margin:10px\">Plaintext</p><button class=\"float-right text-white rounded cursor-pointer tooltip-button\"><img src=\"/static/icons/utils/copy-b9de36a5f9c92ed5c80eb0284941cef5.svg\" alt=\"Copy To Clipboard\" width=\"16px\" height=\"16px\" style=\"filter: invert(1); margin: 0;\"></button><div role=\"tooltip\" class=\"py-2 px-3 z-10 float-right shadow-sm opacity-0 transition-opacity duration-300 text-sm font-medium text-white bg-gray-90 rounded cursor-pointer invisible tooltip rounded-lg\" data-popper-reference-hidden=\"\" data-popper-escaped=\"\" data-popper-placement=\"top\" style=\"background-color: black; position: absolute; inset: auto auto 0px 0px; margin: 0px; transform: translate3d(828px, 5848px, 0px);\"><p style=\"margin: 0;\">Copy to Clipboard</p><div class=\"tooltip-arrow\" data-popper-arrow=\"\" style=\"position: absolute; left: 0px; transform: translate3d(73.6px, 0px, 0px);\"></div></div></div><code id=\"codeblock-18\">idf.py -T littlefs -p YOUR_PORT_HERE encrypted-flash monitor\n</code></pre><h1 id=\"breaking-changes\">Breaking Changes</h1>\n<ul>\n<li>July 22, 2020 - Changed attribute type for file timestamp from <code>0</code> to <code>0x74</code> ('t' ascii value).</li>\n<li>May 3, 2023 - All logging tags have been changed to a unified <code>esp_littlefs</code>.</li>\n</ul>\n<h1 id=\"acknowledgement\">Acknowledgement</h1>\n<p>This code base was heavily modeled after the SPIFFS esp-idf component.</p>\n", "code": "idf.py add-dependency \"joltwallet/littlefs^1.14.1\"", "last_change": "uploaded 2 weeks ago", "download_count": "Downloaded in total 66.1k  times", "download_current_count": "This version: 2.1k  times", "url": "https://components.espressif.com/components/joltwallet/littlefs", "dependencies": {"ESP-IDF": ">=4.3"}, "links": {"Homepage": "https://github.com/joltwallet/esp_littlefs"}}