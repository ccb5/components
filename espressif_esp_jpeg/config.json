{"name": "esp_jpeg", "author": "espressif", "version": "1.0.5~2", "all_version": ["1.0.5~1", "1.0.5", "1.0.4", "1.0.3", "1.0.2", "1.0.1", "1.0.0"], "license": "Apache-2.0", "keywords": [], "description": "JPEG Decoder: TJpgDec", "readme": "<h1 id=\"jpeg-decoder-tjpgdec---tiny-jpeg-decompressor\">JPEG Decoder: TJpgDec - Tiny JPEG Decompressor</h1>\n<p><a href=\"https://components.espressif.com/components/espressif/esp_jpeg\"><img src=\"https://components.espressif.com/components/espressif/esp_jpeg/badge.svg\" alt=\"Component Registry\"></a></p>\n<p>TJpgDec is a generic JPEG image decompressor that is highly optimized for small embedded systems. It works with very low memory consumption.</p>\n<p>Some microcontrollers have TJpg decoder in ROM, it is used, if there is. [^1] Using ROM code can be disabled in menuconfig.</p>\n<p>[^1]: <strong><em>NOTE:</em></strong> When the ROM decoder is used, the configuration can't be changed. The configuration is fixed.</p>\n<h2 id=\"features\">Features</h2>\n<p><strong>Compilation configuration:</strong></p>\n<ul>\n<li>Size of stream input buffer (default 512)</li>\n<li>Output pixel format (default RGB888): RGB888/RGB565</li>\n<li>Switches output descaling feature (default enabled)</li>\n<li>Use table conversion for saturation arithmetic (default enabled)</li>\n<li>Three optimization levels (default basic): 8/16-bit MCUs, 32-bit MCUs, Table conversion for huffman decoding</li>\n</ul>\n<p><strong>Runtime configuration:</strong></p>\n<ul>\n<li>Pixel Format: RGB888, RGB565</li>\n<li>Scaling Ratio: 1/1, 1/2, 1/4 or 1/8 Selectable on Decompression</li>\n<li>Allow swap the first and the last byte of the color</li>\n</ul>\n<h2 id=\"tjpgdec-in-rom\">TJpgDec in ROM</h2>\n<p>Some microcontrollers have TJpg decoder in ROM. It is used as default, but it can be disabled in menuconfig. Then there will be used code saved in this component. </p>\n<h3 id=\"list-of-mcus-which-have-tjpgdec-in-rom\">List of MCUs, which have TJpgDec in ROM</h3>\n<ul>\n<li>ESP32</li>\n<li>ESP32-S3</li>\n<li>ESP32-C3</li>\n<li>ESP32-C6</li>\n</ul>\n<h3 id=\"fixed-compilation-configuration-of-the-rom-code\">Fixed compilation configuration of the ROM code</h3>\n<ul>\n<li>Stream input buffer: 512</li>\n<li>Output pixel format: RGB888</li>\n<li>Descaling feature for output: Enabled</li>\n<li>Table for saturation: Enabled</li>\n<li>Optimization level: Basic (JD_FASTDECODE = 0)</li>\n</ul>\n<h3 id=\"pros-and-cons-using-rom-code\">Pros and cons using ROM code</h3>\n<p><strong>Advantages:</strong></p>\n<ul>\n<li>Save 5k of the flash memory (in the same configuration)</li>\n</ul>\n<p><strong>Disadvantages:</strong></p>\n<ul>\n<li>Cannot be changed compilation configuration</li>\n<li>Some configuration can be faster in some cases</li>\n</ul>\n<h2 id=\"speed-comparison\">Speed comparison</h2>\n<p>In this table are examples of speed decoding JPEG image with this configuration:</p>\n<ul>\n<li>Image size: 320 x 180 px</li>\n<li>Output format: RGB565</li>\n<li>CPU: ESP32-S3</li>\n<li>CPU frequency: 240 MHz</li>\n<li>SPI mode: DIO</li>\n<li>Internal RAM used</li>\n<li>Measured in 1000 retries</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>ROM used</th>\n<th>JD_SZBUF</th>\n<th>JD_FORMAT</th>\n<th>JD_USE_SCALE</th>\n<th>JD_TBLCLIP</th>\n<th>JD_FASTDECODE</th>\n<th>RAM buffer</th>\n<th>Flash size</th>\n<th>Approx. time</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>YES</td>\n<td>512</td>\n<td>RGB888</td>\n<td>1</td>\n<td>1</td>\n<td>0</td>\n<td>3.1 kB</td>\n<td>0 kB</td>\n<td>52 ms</td>\n</tr>\n<tr>\n<td>NO</td>\n<td>512</td>\n<td>RGB888</td>\n<td>1</td>\n<td>1</td>\n<td>0</td>\n<td>3.1 kB</td>\n<td>5 kB</td>\n<td>50 ms</td>\n</tr>\n<tr>\n<td>NO</td>\n<td>512</td>\n<td>RGB888</td>\n<td>1</td>\n<td>0</td>\n<td>0</td>\n<td>3.1 kB</td>\n<td>4 kB</td>\n<td>68 ms</td>\n</tr>\n<tr>\n<td>NO</td>\n<td>512</td>\n<td>RGB888</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n<td>3.1 kB</td>\n<td>5 kB</td>\n<td>50 ms</td>\n</tr>\n<tr>\n<td>NO</td>\n<td>512</td>\n<td>RGB888</td>\n<td>1</td>\n<td>0</td>\n<td>1</td>\n<td>3.1 kB</td>\n<td>4 kB</td>\n<td>62 ms</td>\n</tr>\n<tr>\n<td>NO</td>\n<td>512</td>\n<td>RGB888</td>\n<td>1</td>\n<td>1</td>\n<td>2</td>\n<td>65.5 kB</td>\n<td>5.5 kB</td>\n<td>46 ms</td>\n</tr>\n<tr>\n<td>NO</td>\n<td>512</td>\n<td>RGB888</td>\n<td>1</td>\n<td>0</td>\n<td>2</td>\n<td>65.5 kB</td>\n<td>4.5 kB</td>\n<td>59 ms</td>\n</tr>\n<tr>\n<td>NO</td>\n<td>512</td>\n<td>RGB565</td>\n<td>1</td>\n<td>1</td>\n<td>0</td>\n<td>5 kB</td>\n<td>5 kB</td>\n<td>60 ms</td>\n</tr>\n<tr>\n<td>NO</td>\n<td>512</td>\n<td>RGB565</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n<td>5 kB</td>\n<td>5 kB</td>\n<td>59 ms</td>\n</tr>\n<tr>\n<td>NO</td>\n<td>512</td>\n<td>RGB565</td>\n<td>1</td>\n<td>1</td>\n<td>2</td>\n<td>65.5 kB</td>\n<td>5.5 kB</td>\n<td>56 ms</td>\n</tr>\n</tbody></table>\n<h2 id=\"add-to-project\">Add to project</h2>\n<p>Packages from this repository are uploaded to <a href=\"https://components.espressif.com/\">Espressif's component service</a>.\nYou can add them to your project via <code>idf.py add-dependancy</code>, e.g. </p>\n<pre><code>    idf.py add-dependency esp_jpeg==1.0.0\n</code></pre><p>Alternatively, you can create <code>idf_component.yml</code>. More is in <a href=\"https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-guides/tools/idf-component-manager.html\">Espressif's documentation</a>.</p>\n<h2 id=\"example-use\">Example use</h2>\n<p>Here is example of usage. This calling is <strong>blocking</strong>.</p>\n<pre><code>esp_jpeg_image_cfg_t jpeg_cfg = {\n    .indata = (uint8_t *)jpeg_img_buf,\n    .indata_size = jpeg_img_buf_size,\n    .outbuf = out_img_buf,\n    .outbuf_size = out_img_buf_size,\n    .out_format = JPEG_IMAGE_OUT_FORMAT_RGB565,\n    .out_scale = JPEG_IMAGE_SCALE_0,\n    .flags = {\n        .swap_color_bytes = 1,\n    }\n};\nesp_jpeg_image_output_t outimg;\n\nesp_jpeg_decode(&amp;jpeg_cfg, &amp;outimg);\n</code></pre>", "code": "idf.py add-dependency \"espressif/esp_jpeg^1.0.5~2\"", "last_change": "uploaded 2 months ago", "download_count": "Downloaded in total 162.7k  times", "download_current_count": "This version: 2.8k  times", "url": "https://components.espressif.com/components/espressif/esp_jpeg", "dependencies": {"ESP-IDF": ">=4.4"}, "links": {"Homepage": "https://github.com/espressif/idf-extra-components/tree/master/esp_jpeg/"}}